fetch("js/json/prayer-times.json").then(e=>e.json()).then(e=>{var t=e,r=[];r.push("Фаджр"),r.push("Шурук"),r.push("Зухр"),r.push("Аср"),r.push("Магриб"),r.push("Иша");var n={Фаджр:"Fajr",Шурук:"Sunrise",Зухр:"Dhuhr",Аср:"Asr",Магриб:"Maghrib",Иша:"Isha"},s=new Date,a=s.getMonth()+1,$=s.getDate(),o=60*s.getHours()+s.getMinutes(),i={};t[a]&&t[a][$]&&r.forEach(function(e){var r=n[e];r&&t[a][$][r]&&(i[e]=60*t[a][$][r][0]+t[a][$][r][1])});var u=new Date;u.setDate(u.getDate()+1),u.setHours(0,0,0,0);var c=60*u.getHours()+u.getMinutes();if(o>i["Магриб"]){var p=t[a][$+0];p&&r.forEach(function(e){var t=n[e];t&&p[t]&&(i[e]=60*p[t][0]+p[t][1])})}function h(e,t){var r=t-e;return r<=0?"00:00":Math.floor(r/60).toString().padStart(2,"0")+":"+(r%60).toString().padStart(2,"0")}function l(){for(var e=new Date,t=60*e.getHours()+e.getMinutes(),s=document.getElementById("timeToNextPrayer"),a=document.getElementById("redLine"),$=!1,o=1/0,u=0;u<r.length;u++){var c=r[u],p=i[c];if(void 0!==p&&p>t){var l=p-t;l<o&&(o=l,d=c,$=!0)}}if($){"Фаджр"===d&&t>i["Иша"]?(g=h(t,i["Фаджр"]+1440),v=i["Фаджр"]-i["Иша"]+1440):(g=h(t,i[d]),v=i[d]-i[r[r.indexOf(d)-1]]),s.innerHTML='<span class="clock_end_text">До '+d+'а</span><span class="clock_end"><br>'+g+"</span>";var d,g,v,_=o/v*100;a.style.width=100-_+"%";var f=document.getElementById(n[d].toLowerCase()+"prayerTimes");f&&f.classList.add("current-prayer")}else{var y=h(t,i["Фаджр"]+1440);s.innerHTML='<span class="clock_end_text">До Фаджра</span><span class="clock_end">'+y+"</span>",a.style.width="0"}}setInterval(l,1e3),l()});