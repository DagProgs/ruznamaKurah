fetch("js/json/prayer-times.json").then(e=>e.json()).then(e=>{var t=e,r=[];r.push("Фаджр","Шурук","Зухр","Аср","Магриб","Иша");var n={Фаджр:"Fajr",Шурук:"Sunrise",Зухр:"Dhuhr",Аср:"Asr",Магриб:"Maghrib",Иша:"Isha"},$=new Date,a=$.getMonth()+1,i=$.getDate(),s=60*$.getHours()+$.getMinutes(),o={};t[a]&&t[a][i]&&r.forEach(function(e){var r=n[e];r&&t[a][i][r]&&(o[e]=60*t[a][i][r][0]+t[a][i][r][1])});var u=new Date;u.setDate(u.getDate()+1),u.setHours(0,0,0,0);var h=60*u.getHours()+u.getMinutes();if(s>o["Магриб"]){var _=t[a][i+0];_&&r.forEach(function(e){var t=n[e];t&&_[t]&&(o[e]=60*_[t][0]+_[t][1])})}function f(e,t){var r=t-e;return r<=0?"00:00":Math.floor(r/60).toString().padStart(2,"0")+":"+(r%60).toString().padStart(2,"0")}function y(){var e=new Date,t=60*e.getHours()+e.getMinutes(),$=document.getElementById("nextPrayerText"),a=document.getElementById("nextPrayerTime"),i=!1,s=1/0,u=0;for(u=0;u<r.length;u++){var h=r[u],_=o[h];if(void 0!==_&&_>t){var y=_-t;y<s&&(s=y,d=h,i=!0)}}if(i){"Фаджр"===d&&t>o["Иша"]?(g=f(t,o["Фаджр"]+1440),v=o["Фаджр"]-o["Иша"]+1440):(g=f(t,o[d]),v=o[d]-o[r[r.indexOf(d)-1]]),$.innerHTML="До "+d+"а",a.innerHTML=g;var l=s/v*100;document.getElementById("redLine").style.width=100-l+"%";var M=document.getElementById(n[d].toLowerCase()+"prayerTimes");M&&M.classList.add("current-prayer")}else{var c=f(t,o["Фаджр"]+1440);$.innerHTML="До Фаджра",a.innerHTML=c,document.getElementById("redLine").style.width="0"}}setInterval(y,1e3),y()});